window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();(function(e){e.fn.extend({mattsMedium:function(){var t;var n=arguments[0]||30;return this.each(function(){function r(e){if(!ticking){ticking=true;requestAnimFrame(i)}}function i(){var e=localWindow.height(),r=localDocument.scrollTop(),i=t.offset().top,s=t.height(),o=r+e,u=i-r+s,a=(r/s*100).toFixed(3),f=(a*(n/100)).toFixed(3),l=100-darkenBack-(a*(n/100)).toFixed(0);if(o>i&&r<s){imageFrontLayer.attr("style","transform:translateY(-"+f+"%); -webkit-transform:translateY(-"+f+"%); -moz-transform:translateY("+f+"%);");imageBackLayer.attr("style",orgStyle+"opacity:"+l/100+";")}ticking=false}var t=e(this);localWindow=e(window),localDocument=e(document),imageFrontLayer=t.find("*[data-mattsMediumFront]"),imageBackLayer=t.find("*[data-mattsMediumBackDarken]"),darkenBack=imageBackLayer.attr("data-mattsMediumBackDarken")||0,orgStyle=imageBackLayer.attr("style")+";"||"",ticking=false;r();e(document).scroll(function(e){r(e)});e(document).resize(function(e){r(e)});})}})})(jQuery)